### 1、浏览器多进程

* 浏览器是多进程的

* 浏览器之所以可以运行，是因为系统给它的进程分配了资源(cpu和内存)

* 每打开一个tab，就相当于创建一个独立的浏览器进程

### 2、进程和线程

* 进程是系统分配资源的最小单位

* 进程之间是相互独立的

* 一个进程中有一个或是多个线程

* 多个线程在进程中协助完成任务

* 同一个进程下的多个线程是相互分享程序的内存空间

* 进程是CPU分配资源的最小空间

* 线程是CPU调度的最小单元

* 单线程和多线程是在一个进程中的单线程和多线程

### 3、浏览器中包含哪些进程

* Browser进程： 浏览器的主进程(负责协调，主控)，作用是：

  （1）负责浏览器界面显示，用户交互，如前进和后退

  （2）负责各页面的管理，创建和销毁进程

  （3）网络资源的管理、下载

  （4）将render进程得到的内存中的bitmap,绘制到用户界面上

* 第三方插件进程： 每种类型的插件对应一个进程，仅当使用该插件时才会创建

* GPU进程： 最多一个，用于3D绘制

* 浏览器渲染进程(浏览器内核)(renderer进程，内部是多线程的)：默认每一个tab是一个独立的进程，互不影响，主要作用是页面渲染，脚本执行，事件处理

### 4、浏览器内核：渲染进程（多线程）

- 1、GUI渲染线程
  
  * 负责渲染浏览器界面，解析HTML，CSS，构建DOM树，render树，布局和绘制等

  * 当界面需要重绘或是由于某种原因引起回流时，该线程会被执行

  * GUI线程和JS引擎线程是相互排斥的，当JS引擎执行时，GUI线程会被挂起，GUI更新会被保存在一个队列中等到JS引擎空闲时立即执行

- 2、js引擎线程

  * 也称为js内核，主要负责js脚本程序（例如v8引擎）

  * JS引擎负责解析js脚本语言，运行脚本

  * js引擎一直在等到任务队列中的任务到来，然后加以处理，一个Tabs页中无论什么时候都有一个js线程在处理js程序

  * GUI渲染线程与JS引擎线程是互斥的，所以如果JS执行的时间过长，这样就会造成页面的渲染不连贯，导致页面渲染加载阻塞。

- 3、事件触发线程

  * 归属于浏览器而不是JS引擎，用来控制事件循环（可以理解，JS引擎自己都忙不过来，需要浏览器另开线程协助）

  * 当JS引擎执行代码块如setTimeOut时（也可来自浏览器内核的其他线程,如鼠标点击、AJAX异步请求等），会将对应任务添加到事件线程中

  * 当对应的事件符合触发条件被触发时，该线程会把事件添加到待处理队列的队尾，等待JS引擎的处理

  * 注意，由于JS的单线程关系，所以这些待处理队列中的事件都得排队等待JS引擎处理（当JS引擎空闲时才会去执行）

- 4、定时器触发线程

  * 传说中的setInterval与setTimeout所在线程

  * 浏览器定时计数器并不是由JavaScript引擎计数的,（因为JavaScript引擎是单线程的, 如果处于阻塞线程状态就会影响记计时的准确） 

  * 因此通过单独线程来计时并触发定时（计时完毕后，添加到事件队列中，等待JS引擎空闲后执行）

  * W3C在HTML标准中规定，规定要求setTimeout中低于4ms的时间间隔算为4ms

- 5、异步http请求的线程

  * 在XMLHttpRequest在连接后是通过浏览器新开一个线程请求

  * 将检测到状态变更时，如果设置有回调函数，异步线程就产生状态变更事件，将这个回调再放入事件队列中。再由JavaScript引擎执行。

### 5、常见的浏览器内核有哪些？

* Trident内核：IE,MaxThon,TT,The World,360,搜狗浏览器等。[又称MSHTML]

* Gecko内核：Netscape6及以上版本，FF,MozillaSuite/SeaMonkey等

* Presto内核：Opera7及以上。     [Opera内核原为：Presto，现为：Blink;]

* Webkit内核：Safari,Chrome等。   [ Chrome的：Blink（WebKit的分支）]
